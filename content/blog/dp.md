+++
title = "动态规划"
date = "2025-12-05"
description = ""

[taxonomies]
tags = ["动态规划", "DP", "完全背包", "01背包"]
+++

# 参考资料
- [组合总和 Ⅳ 灵茶山艾府题解](https://leetcode.cn/problems/combination-sum-iv/solutions/2706336/ben-zhi-shi-pa-lou-ti-cong-ji-yi-hua-sou-y52j/)

## 相关例题
- 完全背包
  - 求排列数：[组合总和 Ⅳ](https://leetcode.cn/problems/combination-sum-iv/description/)
  - 求组合数：[零钱兑换](https://leetcode.cn/problems/coin-change/description/?envType=study-plan-v2&envId=top-100-liked)
- 01背包
  - [打家劫舍](https://leetcode.cn/problems/house-robber/description/?envType=study-plan-v2&envId=top-100-liked)


# 分类
`01 背包`和`完全背包`是动态规划中最基础也最核心的两类背包问题，核心区别在于**物品的选取次数限制**。
|类型	|规则	|类比|
| ---- | ---- | ---- |
|01 背包 | 每种物品只有 1 个，要么选、要么不选（0 或 1 次）|	买限量款商品，每件只有 1 件，买或不买 |
| 完全背包 |每种物品有无限个，可以选 0 次、1 次、2 次…… 直到超出背包容量	|便利店买矿泉水，想拿多少拿多少，只要装得下 |


# 完全背包
完全背包的定义是：
- 有 n 种物品，每种物品可以**无限选取**；
- 目标是选出若干物品，使其总重量≤背包容量（或恰好等于），求「最大价值」「组合数」「方案数」等。


完全背包有排列数和组合数两种变体。

| 分类	| 求组合数|	求排列数|
| ---- | ---- | ---- |
| 核心目标	| 不同物品顺序算同一种组合（如 [1,2] 和 [2,1] 算 1 种）|	不同物品顺序算不同排列（如 [1,2] 和 [2,1] 算 2 种）|
| 遍历顺序 | 先遍历物品，再遍历背包容量 | 先遍历背包容量，再遍历物品 |
| 状态转移逻辑 | 每个物品只在 “首次遍历” 时贡献次数 |每个容量下，所有物品都能重复贡献次数 |


## 求组合数的遍历顺序
```cpp
// 先遍历物品，再遍历容量（保证物品顺序固定）
for (auto num : nums) {          // 先选物品1，再选物品2，不会出现2在1前面
    for (int s = num; s <= target; ++s) {
        dp[s] += dp[s - num];
    }
}
```

## 求排列数的遍历顺序
```cpp
// 先遍历容量，再遍历物品（允许物品顺序任意）
for (int s = 1; s <= target; ++s) {  // 对每个容量，遍历所有物品
    for (auto num : nums) {
        if (s >= num) dp[s] += dp[s - num];
    }
}
```



# 01背包
有 n 种不同的物品，每种物品 仅有 1 个（**不可重复选取**），每个物品有两个属性：「重量 w [i]」和「价值 v [i]」；同时有一个容量为 C 的背包。

目标是：从这 n 种物品中选择若干个放入背包，在 **物品总重量不超过背包容量** C 的前提下，使得 **所选物品的总价值最大**；或衍生问题（如 “恰好装满背包的方案数”“最小价值” 等）。
